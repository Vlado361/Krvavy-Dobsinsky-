<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krvavý Dobšinský - Podcast</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Vlastné farby */
        .bg-custom-bg {
            background-color: #C5B38C;
            background-image: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23A88F66' fill-opacity='0.1' fill-rule='evenodd'%3E%3Cpath d='M0 20L20 0l20 20-20 20z' /%3E%3C/g%3E%3C/svg%3E");
        }
        .text-custom-header-text { color: #F5F5F5; }
        .bg-custom-nav { background-color: #A88F66; }
        .bg-custom-card { background-color: #A88F66; }
        .text-custom-gold { color: #E4C266; }
        .border-custom-gold { border-color: #E4C266; }
        .text-custom-dark { color: #1B1B1B; }
        .bg-custom-dark { background-color: #1B1B1B; }
        .text-custom-date { color: #9A7A50; }
        .fill-custom-gold { fill: #E4C266; }
        .fill-custom-dark { fill: #1B1B1B; }
        .fill-header-start { fill: #7A1B1A; }
        .fill-white { fill: #FFFFFF; }

        :root {
             --color-gold: #E4C266;
        }

        .from-header-start { --tw-gradient-from: #7A1B1A var(--tw-gradient-from-position); --tw-gradient-to: #7A1B1Acc var(--tw-gradient-to-position); --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to); }
        .to-header-end { --tw-gradient-to: #5A0000 var(--tw-gradient-to-position); }

        body { font-family: 'Poppins', sans-serif; display: flex; flex-direction: column; min-height: 100vh; }
        .container {
            max-width: 896px; /* Narrower content area (Tailwind max-w-4xl equivalent) */
            margin-left: auto;
            margin-right: auto;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        main {
             flex-grow: 1;
        }

        /* Removed comment block */
        .header-title { font-size: 2.25rem; font-weight: 700; transition: color 0.3s ease; cursor: default; position: relative; z-index: 2; }
        .header-subtitle { font-size: 1.125rem; position: relative; z-index: 2; }

        .nav-link {
            font-size: 0.875rem; cursor: pointer; padding: 0.25rem 0;
            position: relative;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        .nav-link::after {
            content: ''; position: absolute; width: 0; height: 1px;
            bottom: -3px; left: 50%; transform: translateX(-50%);
            background-color: var(--color-gold); transition: width 0.3s ease-in-out;
        }
        .nav-link:hover::after { width: 100%; }

        .section-title { font-size: 1.5rem; font-weight: 700; transition: color 0.3s ease; cursor: pointer; }
        .section-title:hover { color: #E4C266; }

        .episode-title { font-size: 1.25rem; font-weight: 700; transition: color 0.3s ease; cursor: pointer; }
        .episode-title:hover { color: #1B1B1B; }
        .episode-date { font-size: 0.75rem; }
        .episode-desc { font-size: 0.875rem; }
        .footer-text { font-size: 0.75rem; }

        .card-episode-title, .card-text-title { font-size: 1rem; font-weight: 700; transition: color 0.3s ease; cursor: pointer; }
        .card-episode-title:hover, .card-text-title:hover { color: #1B1B1B; }
        .card-episode-desc { font-size: 0.75rem; }
        .card-text-excerpt { font-size: 0.875rem; }
        .subscribe-text { font-size: 0.875rem; line-height: 1.625; }

        /* Indikátor sekcie */
        .section-indicator::before { content: ''; display: block; width: 4px; height: 2.5rem; background-color: #E4C266; position: absolute; left: 0; top: 0; }

        /* Načítavanie */
        .loading-placeholder { background-color: rgba(122, 27, 26, 0.5); border-radius: 6px; animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; display: flex; align-items: center; justify-content: center; color: #F5F5F5; text-align: center; font-size: 0.875rem; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }

        /* Audio prehrávač - základný štýl */
        audio { width: 100%; margin-top: 10px; height: 35px; }

        /* Skrytie/zobrazenie placeholderov a views */
        .loaded .loading-placeholder { display: none; }
        .loaded .content-placeholder { display: block; }
        .content-placeholder { display: none; }
        #all-episodes-grid:empty::before, #texts-grid:empty::before { content: 'Načítavam obsah...'; display: block; text-align: center; padding: 2rem; color: #1B1B1B; }
        .view { display: none; }
        .view.active { display: block; }

        /* Tlačidlá */
        .play-button, .read-more-button, .subscribe-button, .load-more-button { background-color: rgba(27, 27, 27, 0.1); border-radius: 0.375rem; height: 35px; display: inline-flex; align-items: center; justify-content: center; font-size: 0.875rem; font-weight: 700; color: #1B1B1B; margin-top: 0.5rem; padding: 0 1.5rem; cursor: pointer; transition: background-color 0.2s ease; border: none; min-width: 150px; text-decoration: none; }
        .play-button:hover, .read-more-button:hover, .subscribe-button:hover, .load-more-button:hover { background-color: rgba(27, 27, 27, 0.2); }
        .load-more-button { background-color: #7A1B1A; color: #F5F5F5; min-width: 200px; height: 40px; }
        .load-more-button:hover { background-color: #9a2b2a; }
        .load-more-button:disabled { background-color: #a88f66; opacity: 0.6; cursor: not-allowed; }

        /* Formulár */
        .form-label { display: block; margin-bottom: 0.5rem; font-size: 0.875rem; color: #1B1B1B; }
        .form-input, .form-textarea { width: 100%; padding: 0.75rem; border: 1px solid rgba(27, 27, 27, 0.2); border-radius: 0.375rem; background-color: rgba(245, 245, 245, 0.1); color: #1B1B1B; margin-bottom: 1rem; font-size: 0.875rem; }
        .form-input:focus, .form-textarea:focus { outline: none; transition: border-color 0.3s ease, box-shadow 0.3s ease; border-color: #E4C266; box-shadow: 0 0 0 3px rgba(228, 194, 102, 0.2); }
        .form-textarea { min-height: 150px; resize: vertical; }
        .form-button { background-color: #7A1B1A; color: #F5F5F5; padding: 0.75rem 1.5rem; border: none; border-radius: 0.375rem; font-size: 0.875rem; font-weight: 700; cursor: pointer; transition: background-color 0.2s ease, opacity 0.3s ease; }
        .form-button:hover { background-color: #9a2b2a; }
        .form-button:disabled { opacity: 0.7; cursor: not-allowed; }
        .form-note { font-size: 0.75rem; color: #9A7A50; margin-left: 0.5rem; }

        /* O podcaste */
        .about-text p { margin-bottom: 1rem; line-height: 1.625; color: #1B1B1B; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 700; }

        /* Grafické prvky */
        .card-hover-effect { transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease; }
        .card-hover-effect:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(122, 27, 26, 0.15); }
        .player-animation { position: relative; overflow: hidden; }
        @keyframes button-pulse { 0% { box-shadow: 0 0 0 0 rgba(122, 27, 26, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(122, 27, 26, 0); } 100% { box-shadow: 0 0 0 0 rgba(122, 27, 26, 0); } }
        .pulse-animation { animation: button-pulse 1.5s infinite; }

        /* Moderný audio prehrávač */
        .custom-audio { width: 100%; margin-top: 10px; height: 40px; border-radius: 6px; background-color: rgba(0, 0, 0, 0.1); accent-color: #E4C266; }
        .custom-audio::-webkit-media-controls-panel { background-color: transparent; border-radius: 6px; padding: 0 5px; }
        .custom-audio::-webkit-media-controls-play-button { background-color: rgba(228, 194, 102, 0.8); border-radius: 50%; transition: background-color 0.2s ease; margin-right: 8px; }
        .custom-audio::-webkit-media-controls-play-button:hover { background-color: rgba(228, 194, 102, 1); }
        .custom-audio::-webkit-media-controls-current-time-display, .custom-audio::-webkit-media-controls-time-remaining-display { color: #1B1B1B; font-size: 0.75rem; text-shadow: none; }
        .custom-audio::-webkit-media-controls-timeline { background-color: rgba(27, 27, 27, 0.2); border-radius: 4px; height: 6px; margin: 0 5px; }
        .custom-audio::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 12px; height: 12px; background: #E4C266; border-radius: 50%; cursor: pointer; }
        .custom-audio::-webkit-media-controls-volume-slider { background-color: rgba(27, 27, 27, 0.2); border-radius: 4px; height: 6px; }
        .custom-audio::-webkit-media-controls-volume-slider::-webkit-slider-thumb { background: #E4C266; }
        .custom-audio::-moz-range-track { background-color: rgba(27, 27, 27, 0.2); border-radius: 4px; height: 6px; }
        .custom-audio::-moz-range-thumb { width: 12px; height: 12px; background: #E4C266; border-radius: 50%; border: none; cursor: pointer; }
        .custom-audio::-moz-range-progress { background-color: #E4C266; height: 6px; border-radius: 4px; }

        /* Header Graphics Styles & Animations */
        .header-graphic { position: absolute; z-index: 1; pointer-events: none; opacity: 0.6; transition: opacity 0.4s ease, filter 0.4s ease, transform 0.4s ease; }
        .header-star { width: 10px; height: 10px; }
        .header-moon { width: 40px; height: 40px; opacity: 0.5; animation: float 8s ease-in-out infinite; }
        .header-eye { width: 35px; height: auto; opacity: 0.75; animation: pulse-eye 4s ease-in-out infinite; transform-origin: center; }
        .star-pulse-1 { animation: pulse-opacity 5s ease-in-out infinite; }
        .star-pulse-2 { animation: pulse-opacity 7s ease-in-out infinite 1s; }

        /* Header Graphics Hover Effects (triggered by header hover) */
        header:hover .header-star { opacity: 1; filter: drop-shadow(0 0 5px white); }
        header:hover .header-moon { opacity: 0.9; filter: drop-shadow(0 0 8px white); animation-play-state: paused; }
        header:hover .header-eye { opacity: 1; filter: drop-shadow(0 0 6px var(--color-gold)); animation-play-state: paused; }

        /* Keyframes for Animations */
        @keyframes pulse-opacity { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.7; } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }
        @keyframes pulse-eye { 0%, 100% { transform: scale(1); opacity: 0.75; } 50% { transform: scale(1.08); opacity: 0.95; } }

    </style>
</head>
<body class="bg-custom-bg text-custom-dark">

    <div class="container mx-auto">
        <header class="relative bg-gradient-to-b from-header-start to-header-end text-custom-header-text text-center py-16 h-[300px] flex flex-col justify-center items-center overflow-hidden">
            <svg class="header-graphic header-star fill-white top-8 left-1/4 star-pulse-1" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M5 0 L6.5 3.5 L10 5 L6.5 6.5 L5 10 L3.5 6.5 L0 5 L3.5 3.5 Z" /></svg>
            <svg class="header-graphic header-star fill-white top-16 right-1/4" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M5 0 L6.5 3.5 L10 5 L6.5 6.5 L5 10 L3.5 6.5 L0 5 L3.5 3.5 Z" /></svg>
             <svg class="header-graphic header-star fill-white top-6 right-[15%] star-pulse-2" style="width: 7px; height: 7px; opacity: 0.5;" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M5 0 L6.5 3.5 L10 5 L6.5 6.5 L5 10 L3.5 6.5 L0 5 L3.5 3.5 Z" /></svg>
            <svg class="header-graphic header-moon fill-white top-10 right-8" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="9" /></svg>
            <svg class="header-graphic header-eye bottom-8 left-8" viewBox="0 0 50 25" xmlns="http://www.w3.org/2000/svg">
                <path d="M 0 12.5 C 5 0, 45 0, 50 12.5 C 45 25, 5 25, 0 12.5 Z" class="fill-header-start"/>
                <ellipse cx="25" cy="12.5" rx="15" ry="10" class="fill-custom-gold"/>
                <path d="M 25 5 L 25 20" stroke="black" stroke-width="3"/>
            </svg>

            <h1 class="header-title">Krvavý Dobšinský</h1>
            <p class="header-subtitle mt-2">Mrazivé príbehy, ktoré vám nedajú spať.</p>
        </header>

        <nav id="main-nav" class="bg-custom-nav bg-opacity-90 h-auto min-h-[50px] py-2 flex flex-wrap items-center justify-center gap-x-4 gap-y-1 sm:gap-x-6 lg:gap-x-10 sticky top-0 z-10 text-sm">
            <a onclick="showView('home', '#latest')" class="nav-link text-custom-header-text hover:text-custom-gold">Najnovšia epizóda</a>
            <a onclick="showView('home', '#all')" class="nav-link text-custom-header-text hover:text-custom-gold">Všetky Epizódy</a>
            <a onclick="showView('about')" class="nav-link text-custom-header-text hover:text-custom-gold">O podcaste</a>
            <a onclick="showView('subscribe')" class="nav-link text-custom-header-text hover:text-custom-gold">Odoberať</a>
            <a onclick="showView('texts')" class="nav-link text-custom-header-text hover:text-custom-gold">Texty</a>
            <a onclick="showView('contact')" class="nav-link text-custom-header-text hover:text-custom-gold">Kontakt</a>
        </nav>

        <main class="px-4 md:px-8 lg:px-12 py-8">

            <div id="home-view" class="view active">
                <section id="latest" class="mb-12 scroll-mt-20">
                    <div class="relative pl-5 mb-5 h-[40px] flex items-center section-indicator">
                        <h2 class="section-title">Prehrávač</h2>
                    </div>
                    <article id="latest-episode-card" class="bg-custom-card rounded-lg p-6 flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6 min-h-[220px] player-animation">
                        <div class="w-[180px] h-[180px] rounded-md flex-shrink-0 loading-placeholder">Načítavam obrázok...</div>
                        <div class="w-[180px] h-[180px] rounded-md flex-shrink-0 relative group overflow-hidden content-placeholder">
                            <img id="latest-episode-image" src="" alt="Obrázok prehrávanej epizódy" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" onerror="this.onerror=null; this.src='https://i.imgur.com/F9fKCIr.png';">
                            <div class="absolute inset-0 bg-gradient-to-t from-[#1B1B1B] via-transparent to-transparent opacity-0 group-hover:opacity-40 transition-opacity duration-300"></div>
                        </div>
                        <div class="flex-grow">
                            <h3 id="latest-episode-title" class="episode-title text-custom-gold">Načítavam názov...</h3>
                            <p id="latest-episode-date" class="episode-date text-custom-date mb-2">Načítavam dátum...</p>
                            <p id="latest-episode-description" class="episode-desc text-custom-dark leading-relaxed mb-4">Načítavam popis...</p>
                            <div class="bg-black bg-opacity-10 rounded-md p-2 flex items-center space-x-3 h-[35px] loading-placeholder">Načítavam prehrávač...</div>
                            <audio id="latest-episode-audio" controls class="content-placeholder custom-audio" src="">Váš prehliadač nepodporuje audio element.</audio>
                        </div>
                    </article>
                    <p id="rss-error" class="text-red-700 mt-4" style="display: none;">Nepodarilo sa načítať RSS feed.</p>
                </section>

                <hr class="border-t border-custom-gold border-opacity-60 my-8 w-3/4 mx-auto">

                <section id="all" class="mb-12 scroll-mt-20">
                     <div class="relative pl-5 mb-5 h-[40px] flex items-center section-indicator">
                         <h2 class="section-title">Všetky Epizódy</h2>
                     </div>
                     <div id="all-episodes-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                         <div class="loading-placeholder col-span-full h-24">Načítavam epizódy...</div>
                     </div>
                     <div id="load-more-container" class="text-center mt-8" style="display: none;">
                         <button id="load-more-episodes" class="load-more-button">
                             Načítať ďalšie epizódy
                         </button>
                     </div>
                     <p id="all-episodes-error" class="text-red-700 mt-4" style="display: none;">Nepodarilo sa načítať epizódy.</p>
                </section>

            </div> <div id="about-view" class="view">
                <div class="relative pl-5 mb-5 h-[40px] flex items-center section-indicator">
                    <h2 class="section-title">O podcaste</h2>
                </div>
                <div class="bg-custom-card rounded-lg p-6 md:p-8 flow-root">
                    <img src="https://i.imgur.com/F9fKCIr.png"
                         alt="Logo podcastu Krvavý Dobšinský"
                         class="w-32 h-32 md:w-40 md:h-40 rounded-md flex-shrink-0 object-cover mb-4 mr-6 shadow-md float-left"
                         onerror="this.style.display='none'">
                    <div class="about-text text-left">
                        <p>Krvavý Dobšinský je originálny slovenský podcast plný strachu, symboliky a temnej krásy rozprávania. Už niekoľko rokov píšem a nahrávam vlastné strašidelné príbehy, ktoré čerpajú z folklóru, snov, tieňov aj z toho, čo si so sebou nesieme z detstva. Každá epizóda je napísaná autorsky – od prvého slova až po posledný dozvuk.</p>
                        <p>Tento podcast vznikol ako osobný projekt. Bez plánov, bez produkčného tímu, len s túžbou rozprávať. Dnes má viac ako milión vypočutí a tisíce verných fanúšikov, ktorí sa vracajú pre atmosféru, akú inde nenájdu.</p>
                        <p>Čo robí Krvavého Dobšinského výnimočným, je profesionálny zvukový dizajn, ktorý posúva príbehy ďaleko za hranice bežného rozprávania. Namiesto klasickej narácie vytváram akustický svet, kde počuť les, dych, vietor, dvere, ticho – a niekedy aj to, čo by tam byť nemalo.</p>
                        <p>Podcast nesie meno po Pavlovi Dobšinskom, ale jeho tón je iný: temnejší, existenciálnejší, intímnejší. Ak ťa lákajú strašidelné príbehy, slovenské legendy, záhadné zmiznutia a svet, kde sa prelína realita s podvedomím – vitaj.</p>
                        <p>Toto je podcast, ktorý nepočúvaš len ušami. Cítiš ho v tele.</p>
                    </div>
                </div>
            </div> <div id="subscribe-view" class="view">
                <div class="relative pl-5 mb-5 h-[40px] flex items-center section-indicator">
                    <h2 class="section-title">Odoberať</h2>
                </div>
                <div class="bg-custom-card rounded-lg p-6 md:p-8">
                    <p class="subscribe-text text-custom-dark mb-4">Nech ti žiadny príbeh neunikne.</p>
                    <p class="subscribe-text text-custom-dark mb-4">Nové epizódy vychádzajú väčšinou každú stredu – no niekedy sa ozve aj niečo nečakané.</p>
                    <p class="subscribe-text text-custom-dark mb-6">Pridaj si Krvavého Dobšinského medzi obľúbené a buď pri tom, keď sa opäť otvorí brána do tmy.</p>
                    <div class="flex flex-wrap gap-4">
                         <a href="https://open.spotify.com/show/1jpZ723mEpLld7bZeZ2wdE?si=3d80f84aed5d4515" target="_blank" rel="noopener noreferrer" class="subscribe-button" aria-label="Odoberať na Spotify"> Spotify </a>
                         <a href="https://podcasts.apple.com/sk/podcast/krvav%C3%BD-dob%C5%A1insk%C3%BD/id1608900257" target="_blank" rel="noopener noreferrer" class="subscribe-button" aria-label="Odoberať na Apple Podcasts"> Apple Podcasts </a>
                         <a href="https://www.instagram.com/krvavydobsinsky/" target="_blank" rel="noopener noreferrer" class="subscribe-button" aria-label="Sledovať na Instagrame"> Instagram </a>
                    </div>
                </div>
            </div> <div id="contact-view" class="view">
                <div class="relative pl-5 mb-5 h-[40px] flex items-center section-indicator">
                    <h2 class="section-title">Kontaktujte ma</h2>
                </div>
                <div class="bg-custom-card rounded-lg p-6 md:p-8">
                    <p class="text-custom-dark mb-4 leading-relaxed">Máte príbeh, ktorý vám nedá spávať?</p>
                    <p class="text-custom-dark mb-4 leading-relaxed">Možno ste ho zažili na vlastnej koži. Možno vám ho rozprávala stará mama. Možno sa stal… a možno nie.</p>
                    <p class="text-custom-dark mb-6 leading-relaxed">Ak vo vás niečo zostalo – pocit, spomienka, príbeh – napíšte mi. Občas vyberiem niektorý z nich a spracujem ho do epizódy podcastu.</p>
                    <p class="text-custom-dark mb-8 font-semibold">Nebojte sa – stačia slová. Atmosféru už doladím ja.</p>
                    <form id="contact-form" name="podcast-contact" method="POST" data-netlify="true" netlify-honeypot="bot-field" onsubmit="handleContactFormSubmit(event)">
                        <input type="hidden" name="form-name" value="podcast-contact" />
                        <p style="display: none;"><label>Nevypĺňajte toto pole, ak ste človek: <input name="bot-field" /></label></p>
                        <div class="mb-4">
                            <label for="name" class="form-label">Vaše meno alebo prezývka <span class="form-note">(nepovinné)</span></label>
                            <input type="text" id="name" name="name" class="form-input" autocomplete="name">
                        </div>
                        <div class="mb-4">
                            <label for="email" class="form-label">E-mail <span class="form-note">(nepovinné, ak chcete, aby som sa ozval)</span></label>
                            <input type="email" id="email" name="email" class="form-input" autocomplete="email">
                        </div>
                        <div class="mb-4">
                            <label for="story-title" class="form-label">Názov príbehu <span class="form-note">(nepovinné)</span></label>
                            <input type="text" id="story-title" name="story-title" class="form-input">
                        </div>
                        <div class="mb-6">
                            <label for="story" class="form-label">Váš príbeh <span class="text-red-600">*</span></label>
                            <textarea id="story" name="story" class="form-textarea" required aria-required="true"></textarea>
                        </div>
                        <div>
                            <button type="submit" class="form-button">Odoslať príbeh</button>
                        </div>
                    </form>
                     <p id="form-success-message" class="mt-4 text-green-700 font-semibold" style="display: none;">Ďakujem! Váš príbeh bol úspešne odoslaný.</p>
                     <p id="form-error-message" class="mt-4 text-red-700 font-semibold" style="display: none;">Chyba: Vyplňte prosím pole "Váš príbeh".</p>
                </div>
            </div> <div id="texts-view" class="view">
                <div class="relative pl-5 mb-5 h-[40px] flex items-center section-indicator">
                    <h2 class="section-title">Texty</h2>
                </div>
                <p class="text-custom-dark mb-6 leading-relaxed">Tu nájdete prepisy vybraných epizód alebo iné bonusové texty k podcastu Krvavý Dobšinský.</p>
                <div id="texts-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="loading-placeholder col-span-full h-24">Načítavam texty...</div>
                </div>
                <p id="texts-error" class="text-red-700 mt-4" style="display: none;">Nepodarilo sa načítať texty.</p>
            </div> </main>

        <footer class="bg-custom-dark text-custom-header-text text-center py-4 h-[50px] flex items-center justify-center mt-auto">
            <p class="footer-text">© 2025 Krvavý Dobšinský. Všetky práva vyhradené.</p>
        </footer>

    </div> <script>
        // --- Configuration ---
        const rssFeedUrl = 'https://anchor.fm/s/8db2e1ec/podcast/rss';
        const defaultImageUrl = 'https://i.imgur.com/F9fKCIr.png';
        const maxDescriptionLengthPlayer = 200;
        const maxDescriptionLengthGrid = 80;
        const maxExcerptLengthTexts = 120;
        const episodesPerPage = 3;

        // --- Global Variables ---
        let allParsedEpisodes = [];
        let displayedEpisodesCount = 0;

        // --- DOM Element References ---
        const playerSection = document.getElementById('latest');
        const playerCard = document.getElementById('latest-episode-card');
        const playerImage = document.getElementById('latest-episode-image');
        const playerTitle = document.getElementById('latest-episode-title');
        const playerDate = document.getElementById('latest-episode-date');
        const playerDescription = document.getElementById('latest-episode-description');
        const playerAudio = document.getElementById('latest-episode-audio');
        const rssError = document.getElementById('rss-error');
        const allEpisodesGrid = document.getElementById('all-episodes-grid');
        const allEpisodesError = document.getElementById('all-episodes-error');
        const textsGrid = document.getElementById('texts-grid');
        const textsError = document.getElementById('texts-error');
        const homeView = document.getElementById('home-view');
        const contactView = document.getElementById('contact-view');
        const aboutView = document.getElementById('about-view');
        const textsView = document.getElementById('texts-view');
        const subscribeView = document.getElementById('subscribe-view');
        const views = document.querySelectorAll('.view');
        const contactForm = document.getElementById('contact-form');
        const formSuccessMessage = document.getElementById('form-success-message');
        const formErrorMessage = document.getElementById('form-error-message');
        const loadMoreContainer = document.getElementById('load-more-container');
        const loadMoreButton = document.getElementById('load-more-episodes');


        // --- View Management ---
        function showView(viewId, scrollToSelector = null) {
            console.log(`Switching to view: ${viewId}, scroll target: ${scrollToSelector || 'none'}`);
            views.forEach(view => view.classList.remove('active'));
            const activeView = document.getElementById(`${viewId}-view`);
            if (activeView) {
                activeView.classList.add('active');
                if (scrollToSelector) {
                    const elementToScroll = activeView.querySelector(scrollToSelector);
                    if (elementToScroll) {
                        setTimeout(() => {
                            elementToScroll.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }, 0);
                    } else {
                        console.warn(`Scroll target '${scrollToSelector}' not found in view '${viewId}'. Scrolling to top.`);
                        setTimeout(() => window.scrollTo({ top: 0, behavior: 'smooth' }), 0);
                    }
                } else {
                     setTimeout(() => window.scrollTo({ top: 0, behavior: 'smooth' }), 0);
                }
            } else {
                console.error(`View '${viewId}-view' not found. Defaulting to home.`);
                homeView.classList.add('active');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // --- Utility Functions ---
        function formatSlovakDate(dateString) {
            try { const date = new Date(dateString); if (isNaN(date.getTime())) throw new Error("Invalid date"); return date.toLocaleDateString('sk-SK', { year: 'numeric', month: 'long', day: 'numeric' }); } catch (e) { console.error("Date formatting error:", dateString, e); return dateString; }
        }
        function extractAndShortenText(htmlString, maxLength = 100) {
            if (!htmlString) return ""; const tempDiv = document.createElement('div'); tempDiv.innerHTML = htmlString; let text = (tempDiv.textContent || tempDiv.innerText || "").trim(); text = text.replace(/https?:\/\/[^\s]+$/, '').trim(); return text.length > maxLength ? text.substring(0, maxLength).trim() + '...' : text;
        }

        // --- Event Handlers ---
        function handlePlayButtonClick(event) {
            const button = event.target.closest('.play-button'); if (!button) return; const audioSrc = button.dataset.audioSrc; const title = button.dataset.title; const imgSrc = button.dataset.imgSrc || defaultImageUrl; if (!audioSrc) { console.error("Audio source missing."); return; } console.log(`Playing: ${title}`); playerTitle.textContent = title || "Neznáma epizóda"; playerDate.textContent = button.closest('article')?.querySelector('.episode-date')?.textContent || ''; playerDescription.textContent = extractAndShortenText(button.closest('article')?.dataset.fullDesc || '', maxDescriptionLengthPlayer) || "Popis nie je k dispozícii."; playerImage.src = imgSrc; playerImage.onerror = () => { playerImage.src = defaultImageUrl; playerImage.onerror = null; }; if (playerAudio.src !== audioSrc) { playerAudio.src = audioSrc; playerAudio.load(); playerAudio.play().catch(e => console.error("Audio playback error:", e)); } else if (playerAudio.paused) { playerAudio.play().catch(e => console.error("Audio playback error:", e)); } playerCard.classList.add('loaded'); playerSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Updated handleContactFormSubmit for Netlify
        function handleContactFormSubmit(event) {
            event.preventDefault();
            formSuccessMessage.style.display = 'none';
            formErrorMessage.style.display = 'none';
            const storyText = document.getElementById('story').value.trim();
            if (!storyText) {
                formErrorMessage.textContent = 'Chyba: Pole "Váš príbeh" je povinné.';
                formErrorMessage.style.display = 'block';
                document.getElementById('story').focus();
                return;
            }

            const submitButton = contactForm.querySelector('button[type="submit"]');
            if (submitButton) {
                submitButton.classList.add('pulse-animation');
                submitButton.textContent = 'Odosielam...';
                submitButton.disabled = true;
            }

            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                setTimeout(() => {
                    console.log("Form submitted (simulation):", Object.fromEntries(new FormData(contactForm)));
                    formSuccessMessage.textContent = 'Ďakujem! Váš príbeh bol úspešne odoslaný (simulácia).';
                    formSuccessMessage.style.display = 'block';
                    contactForm.reset();
                    if (submitButton) {
                        submitButton.classList.remove('pulse-animation');
                        submitButton.textContent = 'Odoslať príbeh';
                        submitButton.disabled = false;
                    }
                    setTimeout(() => { formSuccessMessage.style.display = 'none'; }, 5000);
                }, 1000);
                return;
            }

            fetch('/', {
                method: 'POST',
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: new URLSearchParams(new FormData(contactForm)).toString()
            })
            .then(response => {
                if (response.ok) {
                    formSuccessMessage.textContent = 'Ďakujem! Váš príbeh bol úspešne odoslaný.';
                    formSuccessMessage.style.display = 'block';
                    contactForm.reset();
                } else {
                    response.text().then(text => {
                         formErrorMessage.textContent = `Chyba pri odosielaní: ${text || response.statusText}`;
                         formErrorMessage.style.display = 'block';
                    });
                    throw new Error('Nastala chyba pri odosielaní');
                }
            })
            .catch(error => {
                console.error("Form submission error:", error);
                if (formErrorMessage.style.display === 'none') {
                    formErrorMessage.textContent = `Chyba: ${error.message}. Skúste to prosím znova.`;
                    formErrorMessage.style.display = 'block';
                }
            })
            .finally(() => {
                 if (submitButton) {
                    submitButton.classList.remove('pulse-animation');
                    submitButton.textContent = 'Odoslať príbeh';
                    submitButton.disabled = false;
                 }
                setTimeout(() => { formSuccessMessage.style.display = 'none'; }, 5000);
            });
        }

        // --- Paginácia Epizód ---
        /**
         * Zobrazí ďalšiu dávku epizód.
         */
        function loadMoreEpisodes() {
            const startIndex = displayedEpisodesCount;
            const endIndex = Math.min(startIndex + episodesPerPage, allParsedEpisodes.length);

            console.log(`Loading episodes from ${startIndex} to ${endIndex - 1}`);

            for (let i = startIndex; i < endIndex; i++) {
                const item = allParsedEpisodes[i];
                try {
                    const title = item.querySelector("title")?.textContent || `Epizóda ${i + 1}`;
                    const pubDate = item.querySelector("pubDate")?.textContent || "";
                    const descriptionHtml = item.querySelector("content\\:encoded")?.textContent || item.querySelector("description")?.textContent || "";
                    const audioUrl = item.querySelector("enclosure")?.getAttribute("url") || "";
                    const imageUrl = item.querySelector("itunes\\:image")?.getAttribute("href") || defaultImageUrl;

                    const card = document.createElement('article');
                    card.dataset.fullDesc = descriptionHtml;
                    card.className = 'bg-custom-card rounded-lg p-5 flex flex-col h-[220px] card-hover-effect border border-transparent hover:border-custom-gold transition-all';
                    card.innerHTML = `
                        <h3 class="card-episode-title text-custom-gold mb-1">${title}</h3>
                        <p class="episode-date text-custom-date mb-2">${formatSlovakDate(pubDate)}</p>
                        <p class="card-episode-desc text-custom-dark leading-normal mb-3 flex-grow overflow-hidden">${extractAndShortenText(descriptionHtml, maxDescriptionLengthGrid)}</p>
                        <button class="play-button mt-auto group" data-audio-src="${audioUrl}" data-title="${title.replace(/"/g, '"')}" data-img-src="${imageUrl}" aria-label="Prehrať epizódu ${title.replace(/"/g, '"')}">
                            <svg viewBox="0 0 24 24" width="1em" height="1em" class="fill-current transition-transform duration-300 group-hover:scale-110" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg>
                            <span class="relative">Prehrať
                                <span class="absolute left-0 -bottom-0.5 w-0 h-0.5 bg-custom-dark group-hover:w-full transition-all duration-300"></span>
                            </span>
                        </button>`;
                    allEpisodesGrid.appendChild(card);
                } catch (e) {
                    console.error(`Error processing episode #${i + 1} for grid:`, e);
                }
            }

            displayedEpisodesCount = endIndex;

            // Aktualizácia tlačidla "Načítať ďalšie"
            if (loadMoreContainer && loadMoreButton) {
                if (displayedEpisodesCount >= allParsedEpisodes.length) {
                    loadMoreContainer.style.display = 'none';
                } else {
                    loadMoreContainer.style.display = 'block';
                }
            }
        }


        // --- Data Loading ---
        function loadRssData() {
            console.log("Loading RSS feed...");
            allParsedEpisodes = [];
            displayedEpisodesCount = 0;
            allEpisodesGrid.innerHTML = '<div class="loading-placeholder col-span-full h-24">Načítavam epizódy...</div>';
            if(loadMoreContainer) loadMoreContainer.style.display = 'none';

            fetch(rssFeedUrl)
                .then(response => { if (!response.ok) throw new Error(`Network error: ${response.statusText}`); return response.text(); })
                .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
                .then(data => {
                    console.log("RSS Feed parsed.");
                    const items = data.querySelectorAll("item");
                    if (!items || items.length === 0) throw new Error("No episode items in feed.");

                    allParsedEpisodes = Array.from(items);

                    const firstItem = allParsedEpisodes[0];
                    try {
                        const title = firstItem.querySelector("title")?.textContent || "Neznámy názov";
                        const pubDate = firstItem.querySelector("pubDate")?.textContent || "";
                        const descriptionHtml = firstItem.querySelector("content\\:encoded")?.textContent || firstItem.querySelector("description")?.textContent || "";
                        const audioUrl = firstItem.querySelector("enclosure")?.getAttribute("url") || "";
                        const imageUrl = firstItem.querySelector("itunes\\:image")?.getAttribute("href") || defaultImageUrl;
                        playerTitle.textContent = title;
                        playerDate.textContent = formatSlovakDate(pubDate);
                        playerDescription.textContent = extractAndShortenText(descriptionHtml, maxDescriptionLengthPlayer);
                        playerImage.src = imageUrl;
                        playerImage.onerror = () => { playerImage.src = defaultImageUrl; playerImage.onerror = null; };
                        playerAudio.src = audioUrl;
                        playerCard.classList.add('loaded');
                    } catch (e) {
                        console.error("Error processing latest episode:", e);
                        rssError.textContent = 'Chyba spracovania najnovšej epizódy.'; rssError.style.display = 'block';
                        playerCard.classList.add('loaded'); playerTitle.textContent = 'Chyba'; playerDate.textContent = '-'; playerDescription.textContent = 'Nepodarilo sa načítať.'; playerImage.src = defaultImageUrl; playerImage.style.display = 'block'; playerAudio.style.display = 'none';
                    }

                    allEpisodesGrid.innerHTML = ''; // Clear loader before loading first batch
                    loadMoreEpisodes(); // Load the first page

                })
                .catch(error => {
                    console.error("Failed to load RSS feed:", error);
                    rssError.textContent = `Chyba načítania podcastu: ${error.message}.`; rssError.style.display = 'block';
                    allEpisodesError.textContent = `Chyba načítania epizód: ${error.message}.`; allEpisodesError.style.display = 'block';
                    playerCard.classList.add('loaded'); playerTitle.textContent = 'Chyba'; playerDate.textContent = '-'; playerDescription.textContent = 'Nepodarilo sa načítať.'; playerImage.src = defaultImageUrl; playerImage.style.display = 'block'; playerAudio.style.display = 'none';
                    allEpisodesGrid.innerHTML = `<p class="col-span-full text-center text-red-700 p-4">${allEpisodesError.textContent}</p>`;
                    if(loadMoreContainer) loadMoreContainer.style.display = 'none';
                });
        }

        function loadTextsData() {
            console.log("Loading texts data (placeholders)...");
            textsGrid.innerHTML = '';

            const placeholderTexts = [
                { title: "Prepis: Zmiznutie v lese", excerpt: "Hlboko v hore sa stratil mladý muž. Nikdy ho nenašli, no miestni hovoria o šepotoch medzi stromami a svetlách, ktoré tam nemajú čo robiť...", link: "#" },
                { title: "Bonus: Pôvod legendy o poludnici", excerpt: "Poludnica, bytosť trestajúca tých, čo nedodržiavajú poludňajší pokoj. Aké sú korene tejto strašidelnej postavy slovanského folklóru?", link: "#" },
                { title: "Prepis: Dom na konci ulice", excerpt: "Opustený dom, ktorý láka deti svojimi tajomstvami. Ale čo ak dom nechce, aby odišli? Príbeh inšpirovaný skutočnými udalosťami.", link: "#" }
            ];

            if (placeholderTexts.length === 0) {
                textsGrid.innerHTML = `<p class="col-span-full text-center text-custom-dark p-4">Momentálne nie sú k dispozícii žiadne texty.</p>`;
                return;
            }

            placeholderTexts.forEach(text => {
                try {
                    const card = document.createElement('article');
                    card.className = 'bg-custom-card rounded-lg p-5 flex flex-col h-[220px] card-hover-effect border border-transparent hover:border-custom-gold transition-all';
                    card.innerHTML = `
                        <h3 class="card-text-title text-custom-gold mb-2">${text.title}</h3>
                        <p class="card-text-excerpt text-custom-dark leading-normal mb-3 flex-grow overflow-hidden">${extractAndShortenText(text.excerpt, maxExcerptLengthTexts)}</p>
                        <button class="read-more-button mt-auto group" onclick="alert('Funkcia Čítať viac ešte nie je implementovaná.')" aria-label="Čítať viac o ${text.title.replace(/"/g, '"')}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" class="fill-current transition-transform duration-300 group-hover:scale-110" viewBox="0 0 16 16" aria-hidden="true"> <path d="M8.5 2.687c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388 1.17.953.712 1.04 1.73.108 2.686-.744.75-1.898 1.134-3.174 1.233C11.253 7.128 10 6.6 8.5 5.66z"/> <path d="M16 14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V1.5A.5.5 0 0 1 4.5 1H6v10.5A1.5 1.5 0 0 0 7.5 13h7a.5.5 0 0 1 .5.5"/> </svg>
                             <span class="relative">Čítať viac<span class="absolute left-0 -bottom-0.5 w-0 h-0.5 bg-custom-dark group-hover:w-full transition-all duration-300"></span></span>
                        </button>`;
                    textsGrid.appendChild(card);
                } catch (e) { console.error("Error creating text card:", e); }
            });
            console.log(`Populated texts grid with ${textsGrid.children.length} placeholder items.`);
        }


        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            allEpisodesGrid.addEventListener('click', handlePlayButtonClick);
            if (loadMoreButton) {
                loadMoreButton.addEventListener('click', loadMoreEpisodes);
            }
            loadRssData();
            loadTextsData();
            console.log("DOM loaded. Initializing page.");
        });

    </script>

</body>
</html>
