<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krvavý Dobšinský - Podcast</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Vlastné farby */
        .bg-custom-bg {
            background-color: #C5B38C; /* Základná farba pozadia platí vždy */
            background-image: none; /* Explicitne nastavené žiadne pozadie obrázka */
        }

        .text-custom-header-text { color: #F5F5F5; }
        .bg-custom-nav { background-color: #A88F66; }
        .bg-custom-card { background-color: #A88F66; }
        .text-custom-gold { color: #E4C266; }
        .border-custom-gold { border-color: #E4C266; }
        .text-custom-dark { color: #1B1B1B; }
        .bg-custom-dark { background-color: #1B1B1B; }
        .text-custom-date { color: #9A7A50; }
        .fill-custom-gold { fill: #E4C266; }
        .fill-custom-dark { fill: #1B1B1B; }
        .fill-header-start { fill: #7A1B1A; }
        .fill-white { fill: #FFFFFF; }

        :root {
            --color-gold: #E4C266;
        }

        .from-header-start { --tw-gradient-from: #7A1B1A var(--tw-gradient-from-position); --tw-gradient-to: #7A1B1Acc var(--tw-gradient-to-position); --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to); }
        .to-header-end { --tw-gradient-to: #5A0000 var(--tw-gradient-to-position); }

        body { font-family: 'Poppins', sans-serif; display: flex; flex-direction: column; min-height: 100vh; }

        /* UPRAVENÉ: Zúženie maximálnej šírky kontajnera */
        .container {
            max-width: 576px; /* Ešte užší obsah (Tailwind max-w-xl equivalent) */
            margin-left: auto;
            margin-right: auto;
            flex-grow: 1; /* Aby container zabral dostupný priestor medzi headerom a footerom */
            display: flex; /* Použitie flexboxu pre vnútorné usporiadanie */
            flex-direction: column; /* Smer usporiadania na stĺpec */
            width: 100%; /* Zabezpečí, že kontajner sa roztiahne na menších obrazovkách */
        }
        main {
            flex-grow: 1; /* Main element zaberie zvyšný priestor v containeri */
        }

        .header-title { font-size: 2.25rem; font-weight: 700; transition: color 0.3s ease; cursor: default; position: relative; z-index: 2; }
        .header-subtitle { font-size: 1.125rem; position: relative; z-index: 2; }

        /* Štýly pre buttony v hlavičke */
        .header-button {
            background-color: rgba(245, 245, 245, 0.15); /* Svetlejšie pozadie pre kontrast v hlavičke */
            color: #F5F5F5; /* Biela farba textu */
            border: 1px solid rgba(245, 245, 245, 0.3); /* Jemný biely okraj */
            border-radius: 0.375rem;
            height: 40px; /* Trochu vyššie */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 700;
            margin-top: 1rem; /* Odsadenie od podnadpisu */
            padding: 0 1.5rem;
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            text-decoration: none;
            min-width: 160px; /* Minimálna šírka */
            position: relative; /* Pre z-index */
            z-index: 2; /* Aby boli nad grafikou */
        }
        .header-button:hover {
            background-color: rgba(245, 245, 245, 0.25); /* Zvýraznenie pri hoveri */
            border-color: rgba(245, 245, 245, 0.5);
        }

        .nav-link {
            font-size: 0.875rem; cursor: pointer; padding: 0.25rem 0;
            position: relative;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        .nav-link::after {
            content: ''; position: absolute; width: 0; height: 1px;
            bottom: -3px; left: 50%; transform: translateX(-50%);
            background-color: var(--color-gold); transition: width 0.3s ease-in-out;
        }
        .nav-link:hover::after { width: 100%; }

        .section-title { font-size: 1.5rem; font-weight: 700; transition: color 0.3s ease; cursor: pointer; }
        .section-title:hover { color: #E4C266; }

        .episode-title { font-size: 1.25rem; font-weight: 700; transition: color 0.3s ease; cursor: pointer; }
        .episode-title:hover { color: #1B1B1B; }
        .episode-date { font-size: 0.75rem; }
        .episode-desc { font-size: 0.875rem; }
        .footer-text { font-size: 0.75rem; }

        .card-episode-title, .card-text-title { font-size: 1rem; font-weight: 700; transition: color 0.3s ease; cursor: pointer; }
        .card-episode-title:hover, .card-text-title:hover { color: #1B1B1B; }
        .card-episode-desc { font-size: 0.75rem; }
        .card-text-excerpt { font-size: 0.875rem; }
        .subscribe-text { font-size: 0.875rem; line-height: 1.625; }

        /* Indikátor sekcie */
        .section-indicator::before { content: ''; display: block; width: 4px; height: 2.5rem; background-color: #E4C266; position: absolute; left: 0; top: 0; }

        /* Načítavanie */
        .loading-placeholder { background-color: rgba(122, 27, 26, 0.5); border-radius: 6px; animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; display: flex; align-items: center; justify-content: center; color: #F5F5F5; text-align: center; font-size: 0.875rem; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }

        /* Audio prehrávač - základný štýl */
        audio { width: 100%; margin-top: 10px; height: 35px; }

        /* Skrytie/zobrazenie placeholderov a views */
        .loaded .loading-placeholder { display: none; }
        .loaded .content-placeholder { display: block; }
        .content-placeholder { display: none; }
        #all-episodes-grid:empty::before, #texts-grid:empty::before { content: 'Načítavam obsah...'; display: block; text-align: center; padding: 2rem; color: #1B1B1B; }
        .view { display: none; }
        .view.active { display: block; }

        /* Tlačidlá (mimo hlavičky) */
        .play-button, .read-more-button, .subscribe-button, .load-more-button { background-color: rgba(27, 27, 27, 0.1); border-radius: 0.375rem; height: 35px; display: inline-flex; align-items: center; justify-content: center; font-size: 0.875rem; font-weight: 700; color: #1B1B1B; margin-top: 0.5rem; padding: 0 1.5rem; cursor: pointer; transition: background-color 0.2s ease; border: none; min-width: 150px; text-decoration: none; }
        .play-button:hover, .read-more-button:hover, .subscribe-button:hover, .load-more-button:hover { background-color: rgba(27, 27, 27, 0.2); }
        .load-more-button { background-color: #7A1B1A; color: #F5F5F5; min-width: 200px; height: 40px; }
        .load-more-button:hover { background-color: #9a2b2a; }
        .load-more-button:disabled { background-color: #a88f66; opacity: 0.6; cursor: not-allowed; }

        /* Formulár */
        .form-label { display: block; margin-bottom: 0.5rem; font-size: 0.875rem; color: #1B1B1B; }
        .form-input, .form-textarea { width: 100%; padding: 0.75rem; border: 1px solid rgba(27, 27, 27, 0.2); border-radius: 0.375rem; background-color: rgba(245, 245, 245, 0.1); color: #1B1B1B; margin-bottom: 1rem; font-size: 0.875rem; }
        .form-input:focus, .form-textarea:focus { outline: none; transition: border-color 0.3s ease, box-shadow 0.3s ease; border-color: #E4C266; box-shadow: 0 0 0 3px rgba(228, 194, 102, 0.2); }
        .form-textarea { min-height: 150px; resize: vertical; }
        .form-button { background-color: #7A1B1A; color: #F5F5F5; padding: 0.75rem 1.5rem; border: none; border-radius: 0.375rem; font-size: 0.875rem; font-weight: 700; cursor: pointer; transition: background-color 0.2s ease, opacity 0.3s ease; }
        .form-button:hover { background-color: #9a2b2a; }
        .form-button:disabled { opacity: 0.7; cursor: not-allowed; }
        .form-note { font-size: 0.75rem; color: #9A7A50; margin-left: 0.5rem; }

        /* O podcaste */
        .about-text p { margin-bottom: 1rem; line-height: 1.625; color: #1B1B1B; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 700; }

        /* Grafické prvky */
        .card-hover-effect { transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease; }
        .card-hover-effect:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(122, 27, 26, 0.15); }
        .player-animation { position: relative; overflow: hidden; }
        @keyframes button-pulse { 0% { box-shadow: 0 0 0 0 rgba(122, 27, 26, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(122, 27, 26, 0); } 100% { box-shadow: 0 0 0 0 rgba(122, 27, 26, 0); } }
        .pulse-animation { animation: button-pulse 1.5s infinite; }

        /* Moderný audio prehrávač */
        .custom-audio { width: 100%; margin-top: 10px; height: 40px; border-radius: 6px; background-color: rgba(0, 0, 0, 0.1); accent-color: #E4C266; }
        .custom-audio::-webkit-media-controls-panel { background-color: transparent; border-radius: 6px; padding: 0 5px; }
        .custom-audio::-webkit-media-controls-play-button { background-color: rgba(228, 194, 102, 0.8); border-radius: 50%; transition: background-color 0.2s ease; margin-right: 8px; }
        .custom-audio::-webkit-media-controls-play-button:hover { background-color: rgba(228, 194, 102, 1); }
        .custom-audio::-webkit-media-controls-current-time-display, .custom-audio::-webkit-media-controls-time-remaining-display { color: #1B1B1B; font-size: 0.75rem; text-shadow: none; }
        .custom-audio::-webkit-media-controls-timeline { background-color: rgba(27, 27, 27, 0.2); border-radius: 4px; height: 6px; margin: 0 5px; }
        .custom-audio::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 12px; height: 12px; background: #E4C266; border-radius: 50%; cursor: pointer; }
        .custom-audio::-webkit-media-controls-volume-slider { background-color: rgba(27, 27, 27, 0.2); border-radius: 4px; height: 6px; }
        .custom-audio::-webkit-media-controls-volume-slider::-webkit-slider-thumb { background: #E4C266; }
        .custom-audio::-moz-range-track { background-color: rgba(27, 27, 27, 0.2); border-radius: 4px; height: 6px; }
        .custom-audio::-moz-range-thumb { width: 12px; height: 12px; background: #E4C266; border-radius: 50%; border: none; cursor: pointer; }
        .custom-audio::-moz-range-progress { background-color: #E4C266; height: 6px; border-radius: 4px; }

        /* Header Graphics Styles & Animations */
        .header-graphic { position: absolute; z-index: 1; pointer-events: none; opacity: 0.6; transition: opacity 0.4s ease, filter 0.4s ease, transform 0.4s ease; }
        .header-star { width: 10px; height: 10px; }
        .header-moon { width: 40px; height: 40px; opacity: 0.5; animation: float 8s ease-in-out infinite; }
        .header-eye { width: 35px; height: auto; opacity: 0.75; animation: pulse-eye 4s ease-in-out infinite; transform-origin: center; }
        .star-pulse-1 { animation: pulse-opacity 5s ease-in-out infinite; }
        .star-pulse-2 { animation: pulse-opacity 7s ease-in-out infinite 1s; }

        /* Header Graphics Hover Effects (triggered by header hover) */
        header:hover .header-star { opacity: 1; filter: drop-shadow(0 0 5px white); }
        header:hover .header-moon { opacity: 0.9; filter: drop-shadow(0 0 8px white); animation-play-state: paused; }
        header:hover .header-eye { opacity: 1; filter: drop-shadow(0 0 6px var(--color-gold)); animation-play-state: paused; }

        /* Keyframes for Animations */
        @keyframes pulse-opacity { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.7; } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }
        @keyframes pulse-eye { 0%, 100% { transform: scale(1); opacity: 0.75; } 50% { transform: scale(1.08); opacity: 0.95; } }

    </style>
</head>
<body class="bg-custom-bg text-custom-dark">

    <div class="container mx-auto">
        <header class="relative bg-gradient-to-b from-header-start to-header-end text-custom-header-text text-center py-16 min-h-[350px] flex flex-col justify-center items-center overflow-hidden">
            <svg class="header-graphic header-star fill-white top-8 left-[35%] star-pulse-1" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M5 0 L6.5 3.5 L10 5 L6.5 6.5 L5 10 L3.5 6.5 L0 5 L3.5 3.5 Z" /></svg>
            <svg class="header-graphic header-star fill-white top-16 right-[35%]" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M5 0 L6.5 3.5 L10 5 L6.5 6.5 L5 10 L3.5 6.5 L0 5 L3.5 3.5 Z" /></svg>
            <svg class="header-graphic header-star fill-white top-6 right-[30%]" style="width: 7px; height: 7px; opacity: 0.5;" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M5 0 L6.5 3.5 L10 5 L6.5 6.5 L5 10 L3.5 6.5 L0 5 L3.5 3.5 Z" /></svg>
            <svg class="header-graphic header-moon fill-white top-10 right-[25%]" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="9" /></svg>
            <svg class="header-graphic header-eye bottom-8 left-[25%]" viewBox="0 0 50 25" xmlns="http://www.w3.org/2000/svg">
                <path d="M 0 12.5 C 5 0, 45 0, 50 12.5 C 45 25, 5 25, 0 12.5 Z" class="fill-header-start"/>
                <ellipse cx="25" cy="12.5" rx="15" ry="10" class="fill-custom-gold"/>
                <path d="M 25 5 L 25 20" stroke="black" stroke-width="3"/>
            </svg>

            <h1 class="header-title">Krvavý Dobšinský</h1>
            <p class="header-subtitle mt-2">Mrazivé príbehy, ktoré vám nedajú spať.</p>

            <div class="mt-6 space-x-4 relative z-10">
                <a onclick="showView('home', '#latest')" class="header-button">Najnovšia epizóda</a>
                <a onclick="showView('contact')" class="header-button">Napíš mi</a>
            </div>
        </header>

        <nav id="main-nav" class="bg-custom-nav bg-opacity-90 h-auto min-h-[50px] py-2 flex flex-wrap items-center justify-center gap-x-4 gap-y-1 sm:gap-x-6 lg:gap-x-10 sticky top-0 z-10 text-sm rounded-b-lg">
            <a onclick="showView('home', '#latest')" class="nav-link text-custom-header-text hover:text-custom-gold">Najnovšia epizóda</a>
            <a onclick="showView('home', '#all')" class="nav-link text-custom-header-text hover:text-custom-gold">Všetky Epizódy</a>
            <a onclick="showView('about')" class="nav-link text-custom-header-text hover:text-custom-gold">O podcaste</a>
            <a onclick="showView('subscribe')" class="nav-link text-custom-header-text hover:text-custom-gold">Odoberať</a>
            <a onclick="showView('texts')" class="nav-link text-custom-header-text hover:text-custom-gold">Texty</a>
            <a onclick="showView('contact')" class="nav-link text-custom-header-text hover:text-custom-gold">Kontakt</a>
        </nav>

        <main class="px-4 md:px-8 lg:px-12 py-8">

            <div id="home-view" class="view active">
                <section id="latest" class="mb-12 scroll-mt-20">
                    <div class="relative pl-5 mb-5 h-[40px] flex items-center section-indicator">
                        <h2 class="section-title">Prehrávač</h2>
                    </div>
                    <article id="latest-episode-card" class="bg-custom-card rounded-lg p-6 flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6 min-h-[220px] player-animation">
                        <div class="w-[180px] h-[180px] rounded-md flex-shrink-0 loading-placeholder">Načítavam obrázok...</div>
                        <div class="w-[180px] h-[180px] rounded-md flex-shrink-0 relative group overflow-hidden content-placeholder">
                            <img id="latest-episode-image" src="" alt="Obrázok prehrávanej epizódy" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" onerror="this.onerror=null; this.src=defaultImageUrl;">
                            <div class="absolute inset-0 bg-gradient-to-t from-[#1B1B1B] via-transparent to-transparent opacity-0 group-hover:opacity-40 transition-opacity duration-300"></div>
                        </div>
                        <div class="flex-grow">
                            <h3 id="latest-episode-title" class="episode-title text-custom-gold">Načítavam názov...</h3>
                            <p id="latest-episode-date" class="episode-date text-custom-date mb-2">Načítavam dátum...</p>
                            <p id="latest-episode-description" class="episode-desc text-custom-dark leading-relaxed mb-4">Načítavam popis...</p>
                            <div class="bg-black bg-opacity-10 rounded-md p-2 flex items-center space-x-3 h-[35px] loading-placeholder">Načítavam prehrávač...</div>
                            <audio id="latest-episode-audio" controls class="content-placeholder custom-audio" src="">Váš prehliadač nepodporuje audio element.</audio>
                        </div>
                    </article>
                    <p id="rss-error" class="text-red-700 mt-4" style="display: none;">Nepodarilo sa načítať RSS feed.</p>
                </section>

                <hr class="border-t border-custom-gold border-opacity-60 my-8 w-3/4 mx-auto">

                <section id="all" class="mb-12 scroll-mt-20">
                    <div class="relative pl-5 mb-5 h-[40px] flex items-center section-indicator">
                        <h2 class="section-title">Všetky Epizódy</h2>
                    </div>
                    <div id="all-episodes-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="loading-placeholder col-span-full h-24">Načítavam epizódy...</div>
                    </div>
                    <div id="load-more-container" class="text-center mt-8" style="display: none;">
                        <button id="load-more-episodes" class="load-more-button">
                            Načítať ďalšie epizódy
                        </button>
                    </div>
                    <p id="all-episodes-error" class="text-red-700 mt-4" style="display: none;">Nepodarilo sa načítať epizódy.</p>
                </section>
            </div>

            <div id="about-view" class="view">
                <div class="relative pl-5 mb-5 h-[40px] flex items-center section-indicator">
                    <h2 class="section-title">O podcaste</h2>
                </div>
                <div class="bg-custom-card rounded-lg p-6 md:p-8 flow-root">
                    <img src="https://i.imgur.com/F9fKCIr.png"
                         alt="Logo podcastu Krvavý Dobšinský"
                         class="w-32 h-32 md:w-40 md:h-40 rounded-md flex-shrink-0 object-cover mb-4 mr-6 shadow-md float-left"
                         onerror="this.onerror=null; this.src='https://placehold.co/160x160/A88F66/1B1B1B?text=Logo'; this.alt='Logo podcastu';">
                    <div class="about-text text-left">
                        <p>Krvavý Dobšinský je originálny slovenský podcast plný strachu, symboliky a temnej krásy rozprávania. Už niekoľko rokov píšem a nahrávam vlastné strašidelné príbehy, ktoré čerpajú z folklóru, snov, tieňov aj z toho, čo si so sebou nesieme z detstva. Každá epizóda je napísaná autorsky – od prvého slova až po posledný dozvuk.</p>
                        <p>Tento podcast vznikol ako osobný projekt. Bez plánov, bez produkčného tímu, len s túžbou rozprávať. Dnes má viac ako milión vypočutí a tisíce verných fanúšikov, ktorí sa vracajú pre atmosféru, akú inde nenájdu.</p>
                        <p>Čo robí Krvavého Dobšinského výnimočným, je profesionálny zvukový dizajn, ktorý posúva príbehy ďaleko za hranice bežného rozprávania. Namiesto klasickej narácie vytváram akustický svet, kde počuť les, dych, vietor, dvere, ticho – a niekedy aj to, čo by tam byť nemalo.</p>
                        <p>Podcast nesie meno po Pavlovi Dobšinskom, ale jeho tón je iný: temnejší, existenciálnejší, intímnejší. Ak ťa lákajú strašidelné príbehy, slovenské legendy, záhadné zmiznutia a svet, kde sa prelína realita s podvedomím – vitaj.</p>
                        <p>Toto je podcast, ktorý nepočúvaš len ušami. Cítiš ho v tele.</p>
                    </div>
                </div>
            </div>

            <div id="subscribe-view" class="view">
                <div class="relative pl-5 mb-5 h-[40px] flex items-center section-indicator">
                    <h2 class="section-title">Odoberať</h2>
                </div>
                <div class="bg-custom-card rounded-lg p-6 md:p-8">
                    <p class="subscribe-text text-custom-dark mb-4">Nech ti žiadny príbeh neunikne.</p>
                    <p class="subscribe-text text-custom-dark mb-4">Nové epizódy vychádzajú väčšinou každú stredu – no niekedy sa ozve aj niečo nečakané.</p>
                    <p class="subscribe-text text-custom-dark mb-6">Pridaj si Krvavého Dobšinského medzi obľúbené a buď pri tom, keď sa opäť otvorí brána do tmy.</p>
                    <div class="flex flex-wrap gap-4">
                         <a href="https://open.spotify.com/show/YOUR_SPOTIFY_SHOW_ID" target="_blank" rel="noopener noreferrer" class="subscribe-button" aria-label="Odoberať na Spotify"> Spotify </a>
                         <a href="https://podcasts.apple.com/sk/podcast/krvav%C3%BD-dob%C5%A1insk%C3%BD/id1608900257" target="_blank" rel="noopener noreferrer" class="subscribe-button" aria-label="Odoberať na Apple Podcasts"> Apple Podcasts </a>
                         <a href="https://www.instagram.com/krvavydobsinsky/" target="_blank" rel="noopener noreferrer" class="subscribe-button" aria-label="Sledovať na Instagrame"> Instagram </a>
                         </div>
                </div>
            </div>

            <div id="contact-view" class="view">
                <div class="relative pl-5 mb-5 h-[40px] flex items-center section-indicator">
                    <h2 class="section-title">Kontaktujte ma</h2>
                </div>
                <div class="bg-custom-card rounded-lg p-6 md:p-8">
                    <p class="text-custom-dark mb-4 leading-relaxed">Máte príbeh, ktorý vám nedá spávať?</p>
                    <p class="text-custom-dark mb-4 leading-relaxed">Možno ste ho zažili na vlastnej koži. Možno vám ho rozprávala stará mama. Možno sa stal… a možno nie.</p>
                    <p class="text-custom-dark mb-6 leading-relaxed">Ak vo vás niečo zostalo – pocit, spomienka, príbeh – napíšte mi. Občas vyberiem niektorý z nich a spracujem ho do epizódy podcastu.</p>
                    <p class="text-custom-dark mb-8 font-semibold">Nebojte sa – stačia slová. Atmosféru už doladím ja.</p>
                    <form id="contact-form" name="podcast-contact" method="POST" data-netlify="true" netlify-honeypot="bot-field" onsubmit="handleContactFormSubmit(event)">
                        <input type="hidden" name="form-name" value="podcast-contact" />
                        <p style="display: none;"><label>Nevypĺňajte toto pole, ak ste človek: <input name="bot-field" /></label></p>
                        <div class="mb-4">
                            <label for="name" class="form-label">Vaše meno alebo prezývka <span class="form-note">(nepovinné)</span></label>
                            <input type="text" id="name" name="name" class="form-input" autocomplete="name">
                        </div>
                        <div class="mb-4">
                            <label for="email" class="form-label">E-mail <span class="form-note">(nepovinné, ak chcete, aby som sa ozval)</span></label>
                            <input type="email" id="email" name="email" class="form-input" autocomplete="email">
                        </div>
                        <div class="mb-4">
                            <label for="story-title" class="form-label">Názov príbehu <span class="form-note">(nepovinné)</span></label>
                            <input type="text" id="story-title" name="story-title" class="form-input">
                        </div>
                        <div class="mb-6">
                            <label for="story" class="form-label">Váš príbeh <span class="text-red-600">*</span></label>
                            <textarea id="story" name="story" class="form-textarea" required aria-required="true"></textarea>
                        </div>
                        <div>
                            <button type="submit" class="form-button">Odoslať príbeh</button>
                        </div>
                    </form>
                    <p id="form-success-message" class="mt-4 text-green-700 font-semibold" style="display: none;">Ďakujem! Váš príbeh bol úspešne odoslaný.</p>
                    <p id="form-error-message" class="mt-4 text-red-700 font-semibold" style="display: none;">Chyba: Vyplňte prosím pole "Váš príbeh".</p>
                </div>
            </div>

            <div id="texts-view" class="view">
                <div class="relative pl-5 mb-5 h-[40px] flex items-center section-indicator">
                    <h2 class="section-title">Texty</h2>
                </div>
                <p class="text-custom-dark mb-6 leading-relaxed">Tu nájdete prepisy vybraných epizód alebo iné bonusové texty k podcastu Krvavý Dobšinský.</p>
                <div id="texts-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="loading-placeholder col-span-full h-24">Načítavam texty...</div>
                </div>
                <p id="texts-error" class="text-red-700 mt-4" style="display: none;">Nepodarilo sa načítať texty.</p>
            </div>

        </main>

        <footer class="bg-custom-dark text-custom-header-text text-center py-4 h-[50px] flex items-center justify-center mt-auto">
            <p class="footer-text">© 2025 Krvavý Dobšinský. Všetky práva vyhradené.</p>
        </footer>

    </div> <script>
        // --- Configuration ---
        const rssFeedUrl = 'https://anchor.fm/s/8db2e1ec/podcast/rss'; // URL RSS feedu
        const defaultImageUrl = 'https://i.imgur.com/F9fKCIr.png'; // Predvolený obrázok
        const maxDescriptionLengthPlayer = 200; // Max dĺžka popisu v prehrávači
        const maxDescriptionLengthGrid = 80; // Max dĺžka popisu v mriežke
        const maxExcerptLengthTexts = 120; // Max dĺžka úryvku v sekcii Texty
        const episodesPerPage = 3; // Počet epizód na stránku (pre "Načítať ďalšie")

        // --- Global Variables ---
        let allParsedEpisodes = []; // Pole pre všetky načítané epizódy z RSS
        let displayedEpisodesCount = 0; // Počet aktuálne zobrazených epizód

        // --- DOM Element References ---
        const playerSection = document.getElementById('latest');
        const playerCard = document.getElementById('latest-episode-card');
        const playerImage = document.getElementById('latest-episode-image');
        const playerTitle = document.getElementById('latest-episode-title');
        const playerDate = document.getElementById('latest-episode-date');
        const playerDescription = document.getElementById('latest-episode-description');
        const playerAudio = document.getElementById('latest-episode-audio');
        const rssError = document.getElementById('rss-error');
        const allEpisodesGrid = document.getElementById('all-episodes-grid');
        const allEpisodesError = document.getElementById('all-episodes-error');
        const textsGrid = document.getElementById('texts-grid');
        const textsError = document.getElementById('texts-error');
        const homeView = document.getElementById('home-view');
        const contactView = document.getElementById('contact-view');
        const aboutView = document.getElementById('about-view');
        const textsView = document.getElementById('texts-view');
        const subscribeView = document.getElementById('subscribe-view');
        const views = document.querySelectorAll('.view'); // Všetky sekcie/pohľady
        const contactForm = document.getElementById('contact-form');
        const formSuccessMessage = document.getElementById('form-success-message');
        const formErrorMessage = document.getElementById('form-error-message');
        const loadMoreContainer = document.getElementById('load-more-container');
        const loadMoreButton = document.getElementById('load-more-episodes');


        // --- View Management ---
        /**
         * Zobrazí špecifikovaný pohľad (sekciu) a skryje ostatné.
         * @param {string} viewId ID pohľadu na zobrazenie (napr. 'home', 'about').
         * @param {string|null} scrollToSelector CSS selektor elementu, ku ktorému sa má posunúť. Ak null, posunie sa na vrch.
         */
        function showView(viewId, scrollToSelector = null) {
            console.log(`Prepínam na pohľad: ${viewId}, cieľ posunu: ${scrollToSelector || 'žiadny'}`);
            // Skryje všetky pohľady
            views.forEach(view => view.classList.remove('active'));
            // Nájde a zobrazí aktívny pohľad
            const activeView = document.getElementById(`${viewId}-view`);
            if (activeView) {
                activeView.classList.add('active');
                // Posunutie (scroll) k cieľovému elementu alebo na vrch
                if (scrollToSelector) {
                    const elementToScroll = activeView.querySelector(scrollToSelector);
                    if (elementToScroll) {
                        // Timeout zaručí, že scroll sa vykoná až po vykreslení
                        setTimeout(() => {
                            elementToScroll.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }, 0);
                    } else {
                        console.warn(`Cieľ posunu '${scrollToSelector}' nebol nájdený v pohľade '${viewId}'. Posúvam na vrch.`);
                        setTimeout(() => window.scrollTo({ top: 0, behavior: 'smooth' }), 0);
                    }
                } else {
                    // Ak nie je špecifikovaný cieľ, posunie sa na vrch stránky
                    setTimeout(() => window.scrollTo({ top: 0, behavior: 'smooth' }), 0);
                }
            } else {
                // Fallback, ak sa pohľad nenájde
                console.error(`Pohľad '${viewId}-view' nebol nájdený. Zobrazujem domovskú stránku.`);
                if (homeView) homeView.classList.add('active'); // Fallback na home view
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // --- Utility Functions ---
        /**
         * Formátuje dátumový reťazec do slovenského formátu.
         * @param {string} dateString Dátumový reťazec (napr. z RSS).
         * @returns {string} Formátovaný dátum alebo pôvodný reťazec pri chybe.
         */
        function formatSlovakDate(dateString) {
            try {
                const date = new Date(dateString);
                // Skontroluje, či je dátum platný
                if (isNaN(date.getTime())) throw new Error("Invalid date");
                return date.toLocaleDateString('sk-SK', { year: 'numeric', month: 'long', day: 'numeric' });
            } catch (e) {
                console.error("Chyba formátovania dátumu:", dateString, e);
                return dateString; // Vráti pôvodný reťazec, ak nastane chyba
            }
        }

        /**
         * Extrahuje čistý text z HTML reťazca a skráti ho na maximálnu dĺžku.
         * @param {string} htmlString HTML reťazec (napr. popis epizódy).
         * @param {number} [maxLength=100] Maximálna dĺžka výsledného textu.
         * @returns {string} Skrátený čistý text.
         */
        function extractAndShortenText(htmlString, maxLength = 100) {
            if (!htmlString) return ""; // Vráti prázdny reťazec, ak je vstup null alebo undefined
            // Vytvorí dočasný div element na parsovanie HTML
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = htmlString;
            // Získa textový obsah, odstráni HTML tagy a biele znaky na začiatku/konci
            let text = (tempDiv.textContent || tempDiv.innerText || "").trim();
            // Odstráni prípadné URL na konci popisu (časté v Anchor.fm popisoch)
            text = text.replace(/https?:\/\/[^\s]+$/, '').trim();
            // Skráti text, ak je dlhší ako povolené maximum
            return text.length > maxLength ? text.substring(0, maxLength).trim() + '...' : text;
        }

        // --- Event Handlers ---
        /**
         * Spracuje kliknutie na tlačidlo "Prehrať" v mriežke epizód.
         * Aktualizuje hlavný prehrávač údajmi z kliknutej epizódy.
         * @param {Event} event Udalosť kliknutia.
         */
        function handlePlayButtonClick(event) {
            // Nájde najbližšie tlačidlo s triedou .play-button
            const button = event.target.closest('.play-button');
            if (!button) return; // Ak sa nekliklo na tlačidlo alebo jeho potomka, nerobí nič

            // Získa dáta epizódy z data atribútov tlačidla
            const audioSrc = button.dataset.audioSrc;
            const title = button.dataset.title;
            const imgSrc = button.dataset.imgSrc || defaultImageUrl; // Použije predvolený obrázok, ak nie je špecifikovaný

            if (!audioSrc) {
                console.error("Chýba zdroj audia pre tlačidlo.");
                return;
            }

            console.log(`Prehrávam: ${title}`);

            // Aktualizuje obsah hlavného prehrávača (ak existuje)
            if (playerTitle) playerTitle.textContent = title || "Neznáma epizóda";
            const articleElement = button.closest('article');
            if (playerDate) playerDate.textContent = articleElement?.querySelector('.episode-date')?.textContent || '';
            if (playerDescription) playerDescription.textContent = extractAndShortenText(articleElement?.dataset.fullDesc || '', maxDescriptionLengthPlayer) || "Popis nie je k dispozícii.";
            if (playerImage) {
                 // Clear previous onerror before setting src
                 playerImage.onerror = null;
                 // Set the src
                 playerImage.src = imgSrc;
                 // Attach the onerror handler *after* setting src
                 playerImage.onerror = () => {
                     console.error(`Error loading player image from grid: ${imgSrc}. Falling back to default.`); // Log error
                     playerImage.src = defaultImageUrl;
                     playerImage.onerror = null; // Prevent infinite loops if default image also fails
                 };
            }

            // Načíta a spustí audio (ak existuje)
            if (playerAudio) {
                if (playerAudio.src !== audioSrc) {
                    playerAudio.src = audioSrc;
                    playerAudio.load(); // Načíta nový zdroj
                    playerAudio.play().catch(e => console.error("Chyba prehrávania audia:", e)); // Spustí prehrávanie
                } else if (playerAudio.paused) {
                    playerAudio.play().catch(e => console.error("Chyba prehrávania audia:", e)); // Pokračuje v prehrávaní
                }
            }

            // Zobrazí obsah prehrávača (ak existuje)
            if (playerCard) playerCard.classList.add('loaded');
            // Posunie zobrazenie na sekciu prehrávača (ak existuje)
            if (playerSection) playerSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        /**
         * Spracuje odoslanie kontaktného formulára pre Netlify.
         * @param {Event} event Udalosť odoslania formulára.
         */
        function handleContactFormSubmit(event) {
            event.preventDefault(); // Zabraňuje predvolenému odoslaniu formulára
            // Skryje predchádzajúce správy (ak existujú)
            if (formSuccessMessage) formSuccessMessage.style.display = 'none';
            if (formErrorMessage) formErrorMessage.style.display = 'none';

            // Validácia: Skontroluje, či je vyplnené pole "Váš príbeh"
            const storyTextarea = document.getElementById('story');
            const storyText = storyTextarea ? storyTextarea.value.trim() : null;
            if (!storyText) {
                if (formErrorMessage) {
                    formErrorMessage.textContent = 'Chyba: Pole "Váš príbeh" je povinné.';
                    formErrorMessage.style.display = 'block';
                }
                if (storyTextarea) storyTextarea.focus(); // Zameria sa na povinné pole
                return; // Ukončí funkciu
            }

            // Vizuálna spätná väzba počas odosielania
            const submitButton = contactForm ? contactForm.querySelector('button[type="submit"]') : null;
            if (submitButton) {
                submitButton.classList.add('pulse-animation'); // Pridá animáciu
                submitButton.textContent = 'Odosielam...'; // Zmení text tlačidla
                submitButton.disabled = true; // Deaktivuje tlačidlo
            }

            // Simulácia odoslania pre lokálny vývoj (localhost alebo 127.0.0.1)
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                setTimeout(() => {
                    console.log("Formulár odoslaný (simulácia):", contactForm ? Object.fromEntries(new FormData(contactForm)) : 'Formulár nenájdený');
                    if (formSuccessMessage) {
                        formSuccessMessage.textContent = 'Ďakujem! Váš príbeh bol úspešne odoslaný (simulácia).';
                        formSuccessMessage.style.display = 'block';
                    }
                    if (contactForm) contactForm.reset(); // Vyčistí formulár
                    if (submitButton) { // Obnoví stav tlačidla
                        submitButton.classList.remove('pulse-animation');
                        submitButton.textContent = 'Odoslať príbeh';
                        submitButton.disabled = false;
                    }
                    // Skryje správu o úspechu po 5 sekundách
                    setTimeout(() => { if (formSuccessMessage) formSuccessMessage.style.display = 'none'; }, 5000);
                }, 1000); // Simulované oneskorenie 1 sekunda
                return; // Ukončí funkciu pre lokálny vývoj
            }

            // Skutočné odoslanie formulára na Netlify pomocou Fetch API
            if (!contactForm) {
                 console.error("Kontaktný formulár nebol nájdený.");
                 if (submitButton) { // Obnoví stav tlačidla aj pri chybe
                     submitButton.classList.remove('pulse-animation');
                     submitButton.textContent = 'Odoslať príbeh';
                     submitButton.disabled = false;
                 }
                 return;
            }

            fetch('/', {
                method: 'POST',
                headers: { "Content-Type": "application/x-www-form-urlencoded" }, // Potrebný header pre Netlify
                body: new URLSearchParams(new FormData(contactForm)).toString() // Konvertuje dáta formulára na správny formát
            })
            .then(response => {
                if (response.ok) { // Ak Netlify odpovie úspešne (stav 2xx)
                    if (formSuccessMessage) {
                        formSuccessMessage.textContent = 'Ďakujem! Váš príbeh bol úspešne odoslaný.';
                        formSuccessMessage.style.display = 'block';
                    }
                    if (contactForm) contactForm.reset(); // Vyčistí formulár
                } else { // Ak nastala chyba na strane servera
                    response.text().then(text => { // Pokúsi sa získať text chyby z odpovede
                        if (formErrorMessage) {
                            formErrorMessage.textContent = `Chyba pri odosielaní: ${text || response.statusText}`;
                            formErrorMessage.style.display = 'block';
                        }
                    });
                    throw new Error('Nastala chyba pri odosielaní formulára'); // Vyvolá chybu pre .catch blok
                }
            })
            .catch(error => { // Spracovanie chýb (sieťové problémy, chyby servera)
                console.error("Chyba odosielania formulára:", error);
                // Zobrazí chybovú správu, len ak už nie je zobrazená iná
                if (formErrorMessage && formErrorMessage.style.display === 'none') {
                    formErrorMessage.textContent = `Chyba: ${error.message}. Skúste to prosím znova.`;
                    formErrorMessage.style.display = 'block';
                }
            })
            .finally(() => { // Tento blok sa vykoná vždy (po úspechu aj chybe)
                 if (submitButton) { // Obnoví stav tlačidla
                     submitButton.classList.remove('pulse-animation');
                     submitButton.textContent = 'Odoslať príbeh';
                     submitButton.disabled = false;
                 }
                 // Skryje správu o úspechu po 5 sekundách (ak bola zobrazená)
                 setTimeout(() => { if (formSuccessMessage) formSuccessMessage.style.display = 'none'; }, 5000);
            });
        }

        // --- Paginácia Epizód ---
        /**
         * Načíta a zobrazí ďalšiu dávku epizód do mriežky.
         */
        function loadMoreEpisodes() {
            // Kontrola, či existuje mriežka
            if (!allEpisodesGrid) {
                 console.warn("Mriežka epizód (#all-episodes-grid) nebola nájdená, nemôžem načítať ďalšie.");
                 return;
            }

            const startIndex = displayedEpisodesCount; // Začína od posledne zobrazeného indexu
            // Končí na konci poľa alebo po pridaní `episodesPerPage` epizód
            const endIndex = Math.min(startIndex + episodesPerPage, allParsedEpisodes.length);

            console.log(`Načítavam epizódy od ${startIndex} do ${endIndex - 1}`);

            // Prejde cez dávku epizód na zobrazenie
            for (let i = startIndex; i < endIndex; i++) {
                const item = allParsedEpisodes[i]; // Aktuálny XML element epizódy
                try {
                    // Získa dáta z XML elementu
                    const title = item.querySelector("title")?.textContent || `Epizóda ${i + 1}`;
                    const pubDate = item.querySelector("pubDate")?.textContent || "";
                    // Preferuje content:encoded, fallback na description
                    const descriptionHtml = item.querySelector("content\\:encoded")?.textContent || item.querySelector("description")?.textContent || "";
                    const audioUrl = item.querySelector("enclosure")?.getAttribute("url") || "";
                    const imageUrl = item.querySelector("itunes\\:image")?.getAttribute("href") || defaultImageUrl;

                    // Vytvorí HTML element pre kartu epizódy
                    const card = document.createElement('article');
                    card.dataset.fullDesc = descriptionHtml; // Uloží plný popis pre prehrávač
                    card.className = 'bg-custom-card rounded-lg p-5 flex flex-col h-[220px] card-hover-effect border border-transparent hover:border-custom-gold transition-all'; // Styling karty
                    // Vloží vnútorné HTML karty
                    card.innerHTML = `
                        <h3 class="card-episode-title text-custom-gold mb-1">${title}</h3>
                        <p class="episode-date text-custom-date mb-2">${formatSlovakDate(pubDate)}</p>
                        <p class="card-episode-desc text-custom-dark leading-normal mb-3 flex-grow overflow-hidden">${extractAndShortenText(descriptionHtml, maxDescriptionLengthGrid)}</p>
                        <button class="play-button mt-auto group" data-audio-src="${audioUrl}" data-title="${title.replace(/"/g, '"')}" data-img-src="${imageUrl}" aria-label="Prehrať epizódu ${title.replace(/"/g, '"')}">
                            <svg viewBox="0 0 24 24" width="1em" height="1em" class="fill-current transition-transform duration-300 group-hover:scale-110 mr-2" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg>
                            <span class="relative">Prehrať
                                <span class="absolute left-0 -bottom-0.5 w-0 h-0.5 bg-custom-dark group-hover:w-full transition-all duration-300"></span>
                            </span>
                        </button>`;
                    // Pridá kartu do mriežky
                    allEpisodesGrid.appendChild(card);
                } catch (e) {
                    console.error(`Chyba spracovania epizódy #${i + 1} pre mriežku:`, e);
                    // V prípade chyby pri spracovaní jednej epizódy pokračuje ďalšou
                }
            }

            // Aktualizuje počet zobrazených epizód
            displayedEpisodesCount = endIndex;

            // Aktualizuje stav tlačidla "Načítať ďalšie"
            if (loadMoreContainer && loadMoreButton) {
                if (displayedEpisodesCount >= allParsedEpisodes.length) {
                    // Ak sú zobrazené všetky epizódy, skryje tlačidlo
                    loadMoreContainer.style.display = 'none';
                } else {
                    // Inak zobrazí tlačidlo
                    loadMoreContainer.style.display = 'block';
                }
            }
        }


        // --- Data Loading ---
        /**
         * Načíta a spracuje dáta z RSS feedu.
         */
        function loadRssData() {
            console.log("Načítavam RSS feed...");
            // Resetuje stav pred načítaním
            allParsedEpisodes = [];
            displayedEpisodesCount = 0;
            // Zobrazí placeholder len ak element existuje
            if (allEpisodesGrid) {
                 allEpisodesGrid.innerHTML = '<div class="loading-placeholder col-span-full h-24">Načítavam epizódy...</div>';
            }
            if(loadMoreContainer) loadMoreContainer.style.display = 'none'; // Skryje tlačidlo "Načítať ďalšie"

            // Načíta RSS feed
            fetch(rssFeedUrl)
                .then(response => {
                    // Skontroluje, či bola odpoveď úspešná
                    if (!response.ok) throw new Error(`Sieťová chyba: ${response.statusText}`);
                    return response.text(); // Prečíta odpoveď ako text
                })
                .then(str => new window.DOMParser().parseFromString(str, "text/xml")) // Paruje XML text
                .then(data => {
                    console.log("RSS Feed úspešne spracovaný.");
                    const items = data.querySelectorAll("item"); // Nájde všetky elementy <item> (epizódy)
                    if (!items || items.length === 0) throw new Error("V RSS feede neboli nájdené žiadne epizódy.");

                    // Uloží všetky nájdené epizódy do globálnej premennej
                    allParsedEpisodes = Array.from(items);

                    // ---- Spracovanie najnovšej epizódy pre prehrávač ----
                    // Kontrola, či existujú elementy prehrávača pred ich aktualizáciou
                    if (playerCard && playerTitle && playerDate && playerDescription && playerImage && playerAudio) {
                        const firstItem = allParsedEpisodes[0]; // Prvá epizóda je najnovšia
                        try {
                            // Získa dáta pre prehrávač
                            const title = firstItem.querySelector("title")?.textContent || "Neznámy názov";
                            const pubDate = firstItem.querySelector("pubDate")?.textContent || "";
                            const descriptionHtml = firstItem.querySelector("content\\:encoded")?.textContent || firstItem.querySelector("description")?.textContent || "";
                            const audioUrl = firstItem.querySelector("enclosure")?.getAttribute("url") || "";
                            // Použije obrázok z RSS alebo defaultImageUrl
                            const imageUrl = firstItem.querySelector("itunes\\:image")?.getAttribute("href") || defaultImageUrl;

                            console.log("Player Image URL from RSS:", firstItem.querySelector("itunes\\:image")?.getAttribute("href")); // Log RSS URL
                            console.log("Final Player Image URL being set:", imageUrl); // Log final URL

                            // Aktualizuje DOM elementy prehrávača
                            playerTitle.textContent = title;
                            playerDate.textContent = formatSlovakDate(pubDate);
                            playerDescription.textContent = extractAndShortenText(descriptionHtml, maxDescriptionLengthPlayer);

                            // Clear previous onerror before setting src
                            playerImage.onerror = null;
                            // Set the src
                            playerImage.src = imageUrl;
                            // Attach the onerror handler *after* setting src
                            playerImage.onerror = () => {
                                console.error(`Error loading player image: ${imageUrl}. Falling back to default: ${defaultImageUrl}`); // Log error
                                playerImage.src = defaultImageUrl;
                                playerImage.onerror = null; // Prevent infinite loops if default image also fails
                            };

                            playerAudio.src = audioUrl;
                            playerCard.classList.add('loaded'); // Odstráni placeholder prehrávača
                            console.log("Player card marked as loaded."); // Log loaded status

                        } catch (e) {
                           // Spracovanie chyby pri načítaní najnovšej epizódy
                           console.error("Chyba spracovania najnovšej epizódy:", e);
                            if (rssError) {
                                rssError.textContent = 'Chyba pri spracovaní najnovšej epizódy.';
                                rssError.style.display = 'block';
                            }
                            // Zobrazí chybový stav v prehrávači
                            playerCard.classList.add('loaded');
                            playerTitle.textContent = 'Chyba';
                            playerDate.textContent = '-';
                            playerDescription.textContent = 'Nepodarilo sa načítať.';
                            playerImage.src = defaultImageUrl; // Ensure default image is set on error
                            playerImage.style.display = 'block'; // Zobrazí defaultný obrázok aj pri chybe
                            playerAudio.style.display = 'none'; // Skryje nefunkčný prehrávač
                        }
                    } else {
                        console.warn("Elementy prehrávača neboli nájdené, preskakujem aktualizáciu.");
                    }


                    // ---- Načítanie prvej dávky epizód do mriežky ----
                    // Kontrola, či existuje mriežka pred načítaním epizód
                    if (allEpisodesGrid) {
                        allEpisodesGrid.innerHTML = ''; // Vymaže placeholder z mriežky
                        loadMoreEpisodes(); // Zavolá funkciu na načítanie prvej stránky epizód
                    } else {
                         console.warn("Mriežka epizód (#all-episodes-grid) nebola nájdená, preskakujem načítanie epizód.");
                    }


                })
                .catch(error => {
                    // Spracovanie chýb pri načítaní alebo parsovaní RSS
                    console.error("Nepodarilo sa načítať RSS feed:", error);
                    if (rssError) {
                        rssError.textContent = `Chyba načítania podcastu: ${error.message}.`;
                        rssError.style.display = 'block';
                    }
                     if (allEpisodesError) {
                        allEpisodesError.textContent = `Chyba načítania epizód: ${error.message}.`;
                        allEpisodesError.style.display = 'block';
                     }
                    // Zobrazí chybový stav v prehrávači aj v mriežke (ak existujú)
                    if (playerCard && playerTitle && playerDate && playerDescription && playerImage && playerAudio) {
                        playerCard.classList.add('loaded');
                        playerTitle.textContent = 'Chyba'; playerDate.textContent = '-'; playerDescription.textContent = 'Nepodarilo sa načítať.'; playerImage.src = defaultImageUrl; playerImage.style.display = 'block'; playerAudio.style.display = 'none';
                    }
                    if (allEpisodesGrid) {
                        allEpisodesGrid.innerHTML = `<p class="col-span-full text-center text-red-700 p-4">${allEpisodesError?.textContent || error.message}</p>`;
                    }
                    if(loadMoreContainer) loadMoreContainer.style.display = 'none'; // Skryje tlačidlo "Načítať ďalšie"
                });
        }

        /**
         * Načíta dáta pre sekciu Texty (momentálne používa placeholder dáta).
         */
        function loadTextsData() {
            // Kontrola, či existuje mriežka pre texty
            if (!textsGrid) {
                 console.warn("Mriežka textov (#texts-grid) nebola nájdená, preskakujem načítanie textov.");
                 return;
            }
            console.log("Načítavam dáta pre sekciu Texty (placeholder)...");
            textsGrid.innerHTML = ''; // Vymaže obsah mriežky (vrátane placeholderu)

            // Placeholder dáta pre texty (nahraďte skutočným načítaním, ak je potrebné)
            const placeholderTexts = [
                { title: "Prepis: Zmiznutie v lese", excerpt: "Hlboko v hore sa stratil mladý muž. Nikdy ho nenašli, no miestni hovoria o šepotoch medzi stromami a svetlách, ktoré tam nemajú čo robiť...", link: "#" },
                { title: "Bonus: Pôvod legendy o poludnici", excerpt: "Poludnica, bytosť trestajúca tých, čo nedodržiavajú poludňajší pokoj. Aké sú korene tejto strašidelnej postavy slovanského folklóru?", link: "#" },
                { title: "Prepis: Dom na konci ulice", excerpt: "Opustený dom, ktorý láka deti svojimi tajomstvami. Ale čo ak dom nechce, aby odišli? Príbeh inšpirovaný skutočnými udalosťami.", link: "#" }
            ];

            // Ak nie sú žiadne texty (ani placeholder), zobrazí správu
            if (placeholderTexts.length === 0) {
                textsGrid.innerHTML = `<p class="col-span-full text-center text-custom-dark p-4">Momentálne nie sú k dispozícii žiadne texty.</p>`;
                return;
            }

            // Vytvorí karty pre každý placeholder text
            placeholderTexts.forEach(text => {
                try {
                    const card = document.createElement('article');
                    card.className = 'bg-custom-card rounded-lg p-5 flex flex-col h-[220px] card-hover-effect border border-transparent hover:border-custom-gold transition-all';
                    // Pridaná funkcia alert pre ukážku
                    card.innerHTML = `
                        <h3 class="card-text-title text-custom-gold mb-2">${text.title}</h3>
                        <p class="card-text-excerpt text-custom-dark leading-normal mb-3 flex-grow overflow-hidden">${extractAndShortenText(text.excerpt, maxExcerptLengthTexts)}</p>
                        <button class="read-more-button mt-auto group" onclick="alert('Funkcia Čítať viac ešte nie je implementovaná.')" aria-label="Čítať viac o ${text.title.replace(/"/g, '"')}">
                            <span class="relative">Čítať viac<span class="absolute left-0 -bottom-0.5 w-0 h-0.5 bg-custom-dark group-hover:w-full transition-all duration-300"></span></span>
                        </button>`;
                    textsGrid.appendChild(card);
                } catch (e) { console.error("Chyba pri vytváraní karty textu:", e); }
            });
            console.log(`Mriežka textov naplnená ${textsGrid.children.length} placeholder položkami.`);
        }


        // --- Initialization ---
        // Spustí sa po načítaní celého HTML DOMu
        document.addEventListener('DOMContentLoaded', () => {
            // Pridá event listener pre kliknutia na tlačidlá "Prehrať" v mriežke (delegácia udalostí)
            // Kontrola, či existuje mriežka pred pridaním listenera
            if (allEpisodesGrid) {
                allEpisodesGrid.addEventListener('click', handlePlayButtonClick);
            }

            // Pridá event listener pre tlačidlo "Načítať ďalšie epizódy"
            if (loadMoreButton) {
                loadMoreButton.addEventListener('click', loadMoreEpisodes);
            }

            // Načíta dáta z RSS a placeholder texty
            loadRssData();
            loadTextsData();

            // Nastaví predvolený pohľad po načítaní (nechávame home-view ako predvolený)
            const anyViewActive = Array.from(views).some(view => view.classList.contains('active'));
            if (!anyViewActive && homeView) {
                 console.log("Žiaden pohľad nie je aktívny, nastavujem 'home-view' ako predvolený.");
                 homeView.classList.add('active');
            }


            console.log("DOM načítaný. Inicializujem stránku.");
        });

    </script>

</body>
</html>
